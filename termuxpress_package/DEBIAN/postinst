#!/bin/bash
# postinst script: TermuXpress post-installation setup

echo "ðŸš€ [TermuXpress] - Post-installation setup is running..."

# 1. Update packages and install core dependencies
apt update
pkg install -y neovim curl git

# 2. Install Packer (NeoVim plugin manager)
if [ ! -d "$HOME/.local/share/nvim/site/pack/packer/start/packer.nvim" ]; then
    git clone --depth 1 https://github.com/wbthomason/packer.nvim \
    "$HOME/.local/share/nvim/site/pack/packer/start/packer.nvim"
fi

# 3. Copy NeoVim config to $HOME if not exists
if [ ! -d "$HOME/.config/nvim" ]; then
    mkdir -p "$HOME/.config/nvim"
    cp -r $PREFIX/share/termuxpress/config/init.lua "$HOME/.config/nvim/"
fi

echo "ðŸŽ‰ Installation complete. Run 'tmx' to start TermuXpress."
