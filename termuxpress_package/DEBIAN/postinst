#!/bin/bash

# ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ·ÙˆÙŠØ±
DEV_TEAM="TermuXpress Development Team: Adem Benarfa"

echo "ğŸš€ [TermuXpress] - Starting post-installation setup by $DEV_TEAM..."

# 1. ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø²Ù… ÙˆØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª (Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…Ø«Ø¨ØªÙ‡)
apt update
apt upgrade -y
pkg install -y neovim curl git

# 2. ØªØ«Ø¨ÙŠØª Packer (Ù…Ø¯ÙŠØ± Ø¥Ø¶Ø§ÙØ§Øª NeoVim)
if [ ! -d "$HOME/.local/share/nvim/site/pack/packer/start/packer.nvim" ]; then
    git clone --depth 1 https://github.com/wbthomason/packer.nvim \
    "$HOME/.local/share/nvim/site/pack/packer/start/packer.nvim"
fi

# 3. Ù†Ø³Ø® Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø¥Ù„Ù‰ $HOME (Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©)
# Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù„ÙØ§Øª ØªØ³Ù…Ø­ Ù„Ù€ TermuXpress Ø¨Ø§Ù„Ø¹Ù…Ù„
if [ ! -d "$HOME/.config/nvim" ]; then
    mkdir -p "$HOME/.config"
    cp -r $PREFIX/share/termuxpress/config/init.lua "$HOME/.config/nvim"
fi

# 4. Ù†Ø³Ø® Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø±Ù…Ø²ÙŠ (tmx)
ln -sf $PREFIX/share/termuxpress/scripts/start-ide.sh $PREFIX/bin/tmx

echo "ğŸ‰ [TermuXpress] Installation complete. Start with 'tmx'."
